<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <ul id="students"></ul>
  </body>
  <script>
    const students = [
      { name: "harry", subject: "JS" },
      { name: "Rohan", subject: "ML" },
    ];

    // function enrollStudent(student, callback) {
    //   setTimeout(function () {
    //     students.push(student);
    //     console.log("enrolled");
    //     callback();
    //   }, 1000);
    // }
    // function getStudents() {
    //   setTimeout(function () {
    //     let str = "";
    //     students.forEach(function (student) {
    //       str += `<li>${student.name}</li>`;
    //     });
    //     document.getElementById("students").innerHTML = str;
    //     console.log("fetched");
    //   }, 8000);
    // }
    // let newStudent = { name: "Suny", subject: "Python" };
    // enrollStudent(newStudent);
    // getStudents();

    function enrollStudent(student) {
      return new Promise(function (resolve, reject) {
        setTimeout(function () {
          students.push(student);
          const error = false;
          if (!error) {
            resolve();
          } else {
            reject();
          }
        }, 1000);
      });
    }
    function getStudents() {
      setTimeout(function () {
        let str = "";
        students.forEach(function (student) {
          str += `<li>${student.name}</li>`;
        });
        document.getElementById("students").innerHTML = str;
        console.log("fetched");
      }, 8000);
    }
    let newStudent = { name: "Suny", subject: "Python" };
    enrollStudent(newStudent)
      .then(function () {
        getStudents();
      })
      .catch(function () {
        console.log("Some error occursed");
      });
    getStudents();
  </script>
</html>
